{"version":3,"sources":["../../src/common/getObjectId.ts"],"names":["getObjectId","target","Types","ObjectId","toString","Document","_id","isValid","result","type","id"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;AACO,MAAMA,WAAW,GACtBC,MADyB,IAEC;AAC1B,MAAIA,MAAM,YAAYC,gBAAMC,QAA5B,EAAsC;AACpC,WAAO,IAAID,gBAAMC,QAAV,CAAmBF,MAAM,CAACG,QAAP,EAAnB,CAAP;AACD;;AAED,MAAI,OAAOH,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,YAAYI,kBAApD,EAA8D;AAC5D,WAAOJ,MAAM,IAAIA,MAAM,CAACK,GAAjB,GAAuB,IAAIJ,gBAAMC,QAAV,CAAmBF,MAAM,CAACK,GAA1B,CAAvB,GAAwD,IAA/D;AACD;;AAED,MAAIJ,gBAAMC,QAAN,CAAeI,OAAf,CAAuBN,MAAvB,CAAJ,EAAoC;AAClC,WAAO,IAAIC,gBAAMC,QAAV,CAAmBF,MAAM,CAACG,QAAP,EAAnB,CAAP;AACD;;AAED,MAAI,OAAOH,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,UAAMO,MAAM,GAAG,gCAAaP,MAAb,CAAf;;AAEA,QAAIO,MAAM,CAACC,IAAP,IAAeD,MAAM,CAACE,EAAtB,IAA4BR,gBAAMC,QAAN,CAAeI,OAAf,CAAuBC,MAAM,CAACE,EAA9B,CAAhC,EAAmE;AACjE,aAAO,IAAIR,gBAAMC,QAAV,CAAmBK,MAAM,CAACE,EAA1B,CAAP;AACD;;AAED,QAAIR,gBAAMC,QAAN,CAAeI,OAAf,CAAuBN,MAAvB,CAAJ,EAAoC;AAClC,aAAO,IAAIC,gBAAMC,QAAV,CAAmBF,MAAnB,CAAP;AACD;;AAED,WAAO,IAAP;AACD;;AAED,SAAO,IAAP;AACD,CA9BM","sourcesContent":["import { fromGlobalId } from \"graphql-relay\";\nimport { Types, Document } from \"mongoose\";\n\n// returns an ObjectId given an param of unknown type\nexport const getObjectId = (\n  target: string | Document | Types.ObjectId\n): Types.ObjectId | null => {\n  if (target instanceof Types.ObjectId) {\n    return new Types.ObjectId(target.toString());\n  }\n\n  if (typeof target === \"object\" && target instanceof Document) {\n    return target && target._id ? new Types.ObjectId(target._id) : null;\n  }\n\n  if (Types.ObjectId.isValid(target)) {\n    return new Types.ObjectId(target.toString());\n  }\n\n  if (typeof target === \"string\") {\n    const result = fromGlobalId(target);\n\n    if (result.type && result.id && Types.ObjectId.isValid(result.id)) {\n      return new Types.ObjectId(result.id);\n    }\n\n    if (Types.ObjectId.isValid(target)) {\n      return new Types.ObjectId(target);\n    }\n\n    return null;\n  }\n\n  return null;\n};\n"],"file":"getObjectId.js"}